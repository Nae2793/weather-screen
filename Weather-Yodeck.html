<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Weer Dashboard - Dronten</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --bomech-blue: #0099CC;
            --bomech-blue-dark: #0088BB;
            --bomech-orange: #FF9900;
            --bg-card: rgba(255, 255, 255, 0.12);
            --accent-blue: #ffffff;
            --text-primary: #ffffff;
            --text-secondary: rgba(255, 255, 255, 0.95);
            --text-muted: rgba(255, 255, 255, 0.75);
            --border-color: rgba(255, 255, 255, 0.25);
            --glow: rgba(255, 255, 255, 0.4);
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Arial, sans-serif;
            background: var(--bomech-blue);
            color: var(--text-primary);
            min-height: 100vh;
            overflow: hidden;
            position: relative;
        }

        .container {
            position: relative;
            z-index: 1;
            max-width: 1920px;
            margin: 0 auto;
            padding: 40px;
            display: grid;
            grid-template-columns: 1fr 1fr;
            grid-template-rows: auto 1fr;
            gap: 30px;
            height: 100vh;
            max-height: 100vh;
            overflow: hidden;
        }

        /* Header with current weather */
        .header {
            grid-column: 1 / -1;
            background: var(--bg-card);
            backdrop-filter: blur(20px);
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 20px;
            padding: 35px 45px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 6px 24px rgba(0, 0, 0, 0.15);
            animation: fadeInDown 0.8s ease-out;
        }

        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .current-weather {
            display: flex;
            align-items: center;
            gap: 40px;
        }

        .location {
            font-size: 28px;
            font-weight: 300;
            color: var(--text-secondary);
            margin-bottom: 8px;
            letter-spacing: 0.5px;
        }

        .current-temp {
            font-size: 96px;
            font-weight: 700;
            line-height: 1;
            color: white;
            text-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
        }

        .current-condition {
            font-size: 32px;
            font-weight: 400;
            color: var(--text-primary);
            margin-top: 8px;
        }

        .weather-icon {
            font-size: 120px;
            filter: drop-shadow(0 0 20px var(--glow));
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }

        .current-details {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .detail-row {
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 18px;
            color: var(--text-secondary);
        }

        .detail-label {
            font-weight: 300;
            min-width: 120px;
        }

        .detail-value {
            font-weight: 600;
            font-family: 'Courier New', Courier, monospace;
            color: white;
        }

        /* Hourly section */
        .hourly-section {
            background: var(--bg-card);
            backdrop-filter: blur(20px);
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 6px 24px rgba(0, 0, 0, 0.15);
            animation: fadeInLeft 0.8s ease-out 0.2s both;
            display: flex;
            flex-direction: column;
            max-height: calc(100vh - 400px);
            min-height: 500px;
            overflow: hidden;
            position: relative;
        }
        
        /* Visual indicator at bottom of sections */
        .hourly-section::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 60px;
            background: linear-gradient(to top, rgba(0, 153, 204, 0.95) 0%, transparent 100%);
            pointer-events: none;
            border-radius: 0 0 24px 24px;
        }

        @keyframes fadeInLeft {
            from {
                opacity: 0;
                transform: translateX(-30px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .section-title {
            font-size: 22px;
            font-weight: 700;
            margin-bottom: 20px;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: 12px;
            background: var(--bomech-orange);
            padding: 14px 24px;
            margin: -30px -30px 20px -30px;
            border-radius: 20px 20px 0 0;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .section-title::before {
            display: none;
        }

        .sun-info {
            display: flex;
            gap: 30px;
            margin-bottom: 25px;
            padding: 20px;
            background: rgba(79, 158, 255, 0.05);
            border-radius: 12px;
            border: 1px solid var(--border-color);
        }

        .sun-item {
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 18px;
        }

        .sun-icon {
            font-size: 32px;
        }

        .sun-label {
            color: var(--text-secondary);
            font-size: 14px;
            margin-bottom: 4px;
        }

        .sun-time {
            font-family: 'Courier New', Courier, monospace;
            font-size: 20px;
            font-weight: 600;
            color: white;
        }

        .hourly-scroll {
            overflow-y: auto;
            flex: 1;
            padding-right: 10px;
        }

        .hourly-scroll::-webkit-scrollbar {
            width: 8px;
        }

        .hourly-scroll::-webkit-scrollbar-track {
            background: rgba(79, 158, 255, 0.05);
            border-radius: 4px;
        }

        .hourly-scroll::-webkit-scrollbar-thumb {
            background: var(--accent-blue);
            border-radius: 4px;
        }

        .hourly-forecast {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .hourly-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 16px 20px;
            background: rgba(79, 158, 255, 0.05);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            transition: all 0.3s ease;
        }

        .hourly-item:hover {
            background: rgba(79, 158, 255, 0.1);
            border-color: var(--accent-blue);
            transform: translateX(5px);
        }

        .hour-time {
            font-family: 'Courier New', Courier, monospace;
            font-size: 18px;
            font-weight: 600;
            color: var(--text-primary);
            min-width: 70px;
        }

        .hour-icon {
            font-size: 36px;
            filter: drop-shadow(0 0 8px var(--glow));
        }

        .hour-details {
            display: flex;
            gap: 30px;
            align-items: center;
            flex: 1;
            justify-content: flex-end;
        }

        .hour-temp {
            font-family: 'Courier New', Courier, monospace;
            font-size: 24px;
            font-weight: 600;
            color: white;
            min-width: 60px;
            text-align: right;
        }

        .hour-rain {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 16px;
            color: var(--text-secondary);
            min-width: 80px;
        }

        .hour-wind {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 16px;
            color: var(--text-secondary);
            min-width: 100px;
        }

        /* Forecast section */
        .forecast-section {
            background: var(--bg-card);
            backdrop-filter: blur(20px);
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 6px 24px rgba(0, 0, 0, 0.15);
            animation: fadeInRight 0.8s ease-out 0.2s both;
            display: flex;
            flex-direction: column;
            max-height: calc(100vh - 400px);
            min-height: 500px;
            overflow: hidden;
            position: relative;
        }
        
        /* Visual indicator at bottom of forecast section */
        .forecast-section::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 60px;
            background: linear-gradient(to top, rgba(0, 153, 204, 0.95) 0%, transparent 100%);
            pointer-events: none;
            border-radius: 0 0 24px 24px;
        }

        @keyframes fadeInRight {
            from {
                opacity: 0;
                transform: translateX(30px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .forecast-days {
            display: flex;
            flex-direction: column;
            gap: 20px;
            overflow-y: auto;
            flex: 1;
            padding-right: 10px;
        }

        .forecast-days::-webkit-scrollbar {
            width: 8px;
        }

        .forecast-days::-webkit-scrollbar-track {
            background: rgba(79, 158, 255, 0.05);
            border-radius: 4px;
        }

        .forecast-days::-webkit-scrollbar-thumb {
            background: var(--accent-blue);
            border-radius: 4px;
        }

        .forecast-day {
            background: rgba(79, 158, 255, 0.05);
            border: 1px solid var(--border-color);
            border-radius: 16px;
            padding: 24px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            transition: all 0.3s ease;
        }

        .forecast-day:hover {
            background: rgba(255, 255, 255, 0.2);
            border-color: white;
            transform: translateX(5px);
        }

        .day-info {
            display: flex;
            align-items: center;
            gap: 20px;
            flex: 1;
        }

        .day-name {
            font-size: 22px;
            font-weight: 600;
            min-width: 120px;
            color: var(--text-primary);
        }

        .day-icon {
            font-size: 56px;
            filter: drop-shadow(0 0 10px var(--glow));
        }

        .day-condition {
            font-size: 18px;
            color: var(--text-secondary);
            flex: 1;
        }

        .day-temps {
            display: flex;
            gap: 20px;
            align-items: center;
        }

        .temp-high {
            font-size: 32px;
            font-weight: 600;
            font-family: 'Courier New', Courier, monospace;
            color: white;
        }

        .temp-low {
            font-size: 24px;
            font-weight: 400;
            font-family: 'Courier New', Courier, monospace;
            color: var(--text-muted);
        }

        .loading {
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100%;
            font-size: 24px;
            color: var(--text-secondary);
        }

        .spinner {
            display: inline-block;
            width: 40px;
            height: 40px;
            border: 4px solid var(--border-color);
            border-top-color: var(--accent-cyan);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-right: 16px;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Last updated footer */
        .last-updated {
            position: absolute;
            bottom: 20px;
            left: 40px;
            font-size: 14px;
            font-family: 'Courier New', Courier, monospace;
            color: rgba(255, 255, 255, 0.6);
            opacity: 0.7;
        }

            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Arial, sans-serif;
            font-size: 13px;
            font-weight: 300;
            color: white;
            letter-spacing: 4px;
            text-transform: lowercase;
        }
    </style>
</head>
<body>
    <!-- Decorative Stripes -->
    <div class="brand-stripes">
        <div class="stripe stripe-tall"></div>
        <div class="stripe stripe-medium"></div>
        <div class="stripe stripe-short"></div>
        <div class="stripe-dots">
            <div class="dot"></div>
            <div class="dot"></div>
            <div class="dot"></div>
        </div>
    </div>

    <div class="container">
        <!-- Current Weather Header -->
        <div class="header">
            <div class="current-weather">
                <div>
                    <div class="location">üìç Albergen, Overijssel</div>
                    <div class="current-temp" id="currentTemp">--¬∞</div>
                    <div class="current-condition" id="currentCondition">Laden...</div>
                </div>
                <div class="weather-icon" id="currentIcon">üå§Ô∏è</div>
            </div>
            <div class="current-details">
                <div class="detail-row">
                    <span class="detail-label">Gevoelstemperatuur</span>
                    <span class="detail-value" id="feelsLike">--¬∞</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">Windsnelheid</span>
                    <span class="detail-value" id="windSpeed">-- km/h</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">Luchtvochtigheid</span>
                    <span class="detail-value" id="humidity">--%</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">Neerslag</span>
                    <span class="detail-value" id="precipitation">-- mm</span>
                </div>
            </div>
        </div>

        <!-- Hourly Forecast Section -->
        <div class="hourly-section">
            <div class="section-title">üïê Uurlijkse Voorspelling</div>
            
            <div class="sun-info" id="sunInfo">
                <div class="sun-item">
                    <div class="sun-icon">üåÖ</div>
                    <div>
                        <div class="sun-label">Zonsopgang</div>
                        <div class="sun-time" id="sunrise">--:--</div>
                    </div>
                </div>
                <div class="sun-item">
                    <div class="sun-icon">üåá</div>
                    <div>
                        <div class="sun-label">Zonsondergang</div>
                        <div class="sun-time" id="sunset">--:--</div>
                    </div>
                </div>
                <div class="sun-item">
                    <div class="sun-icon">‚òÄÔ∏è</div>
                    <div>
                        <div class="sun-label">UV-Index</div>
                        <div class="sun-time" id="uvIndex">--</div>
                    </div>
                </div>
            </div>

            <div class="hourly-scroll">
                <div class="hourly-forecast" id="hourlyForecast">
                    <div class="loading">
                        <span class="spinner"></span>
                        Uurgegevens laden...
                    </div>
                </div>
            </div>
        </div>

        <!-- Forecast Section -->
        <div class="forecast-section">
            <div class="section-title">üìÖ 5-Daagse Voorspelling</div>
            <div class="forecast-days" id="forecastDays">
                <div class="loading">
                    <span class="spinner"></span>
                    Weergegevens laden...
                </div>
            </div>
        </div>
    </div>

    <div class="last-updated" id="lastUpdated">Laatst bijgewerkt: --:--</div>

    <script>
        // Co√∂rdinaten Albergen
        const LAT = 52.377;
        const LON = 6.756;

        // Haal weerdata op van Open-Meteo met uurlijkse voorspelling
        async function loadWeatherData() {
            try {
                const url = `https://api.open-meteo.com/v1/forecast?latitude=${LAT}&longitude=${LON}&current=temperature_2m,apparent_temperature,precipitation,relative_humidity_2m,weather_code,wind_speed_10m&hourly=temperature_2m,precipitation_probability,precipitation,weather_code,wind_speed_10m&daily=weather_code,temperature_2m_max,temperature_2m_min,sunrise,sunset,uv_index_max&timezone=Europe/Amsterdam&forecast_days=6`;
                
                const response = await fetch(url);
                
                if (!response.ok) {
                    throw new Error(`API responded with status: ${response.status}`);
                }
                
                const data = await response.json();
                
                updateCurrentWeather(data.current, data.current_units);
                updateSunInfo(data.daily);
                updateHourlyForecast(data.hourly, data.hourly_units);
                updateForecast(data.daily, data.daily_units);
                updateLastUpdated();
                
            } catch (error) {
                console.error('Fout bij laden weerdata:', error);
                // Toon foutmelding aan gebruiker
                document.getElementById('currentTemp').textContent = 'X';
                document.getElementById('currentCondition').textContent = 'Kan weerdata niet laden - controleer internetverbinding';
                
                const hourlyContainer = document.getElementById('hourlyForecast');
                if (hourlyContainer) {
                    hourlyContainer.innerHTML = '<div style="padding: 20px; text-align: center; color: rgba(255,255,255,0.8);">Weergegevens momenteel niet beschikbaar. Controleer de netwerkverbinding.</div>';
                }
                
                const forecastContainer = document.getElementById('forecastDays');
                if (forecastContainer) {
                    forecastContainer.innerHTML = '<div style="padding: 20px; text-align: center; color: rgba(255,255,255,0.8);">Weergegevens momenteel niet beschikbaar.</div>';
                }
            }
        }

        // Update huidige weer
        function updateCurrentWeather(current, units) {
            document.getElementById('currentTemp').textContent = Math.round(current.temperature_2m) + '¬∞';
            document.getElementById('feelsLike').textContent = Math.round(current.apparent_temperature) + '¬∞';
            document.getElementById('windSpeed').textContent = Math.round(current.wind_speed_10m) + ' ' + units.wind_speed_10m;
            document.getElementById('humidity').textContent = current.relative_humidity_2m + '%';
            document.getElementById('precipitation').textContent = current.precipitation + ' ' + units.precipitation;
            
            const weatherInfo = getWeatherInfo(current.weather_code);
            document.getElementById('currentCondition').textContent = weatherInfo.description;
            document.getElementById('currentIcon').textContent = weatherInfo.icon;
        }

        // Update zon- en UV-informatie
        function updateSunInfo(daily) {
            const sunrise = new Date(daily.sunrise[0]);
            const sunset = new Date(daily.sunset[0]);
            
            document.getElementById('sunrise').textContent = sunrise.toLocaleTimeString('nl-NL', { 
                hour: '2-digit', 
                minute: '2-digit' 
            });
            
            document.getElementById('sunset').textContent = sunset.toLocaleTimeString('nl-NL', { 
                hour: '2-digit', 
                minute: '2-digit' 
            });
            
            document.getElementById('uvIndex').textContent = daily.uv_index_max[0].toFixed(1);
        }

        // Update uurlijkse voorspelling (volgende 8 uur vanaf huidig uur)
        function updateHourlyForecast(hourly, units) {
            const hourlyContainer = document.getElementById('hourlyForecast');
            hourlyContainer.innerHTML = '';
            
            // Bepaal het huidige uur
            const now = new Date();
            const currentHour = now.getHours();
            
            // Vind de index in de API data die overeenkomt met het huidige uur
            // De API geeft uren terug vanaf middernacht, dus we zoeken naar het juiste startpunt
            let startIndex = 0;
            for (let i = 0; i < hourly.time.length; i++) {
                const hourTime = new Date(hourly.time[i]);
                if (hourTime.getHours() === currentHour && hourTime.getDate() === now.getDate()) {
                    startIndex = i;
                    break;
                }
            }
            
            // Toon de komende 8 uur vanaf het huidige uur
            for (let i = 0; i < 8; i++) {
                const index = startIndex + i;
                
                // Check of we niet buiten de beschikbare data vallen
                if (index >= hourly.time.length) break;
                
                const time = new Date(hourly.time[index]);
                const timeString = time.toLocaleTimeString('nl-NL', { 
                    hour: '2-digit', 
                    minute: '2-digit' 
                });
                
                const weatherInfo = getWeatherInfo(hourly.weather_code[index]);
                const temp = Math.round(hourly.temperature_2m[index]);
                const rain = hourly.precipitation_probability[index];
                const wind = Math.round(hourly.wind_speed_10m[index]);
                
                const hourElement = document.createElement('div');
                hourElement.className = 'hourly-item';
                hourElement.style.animationDelay = `${i * 0.05}s`;
                
                hourElement.innerHTML = `
                    <div class="hour-time">${timeString}</div>
                    <div class="hour-icon">${weatherInfo.icon}</div>
                    <div class="hour-details">
                        <div class="hour-temp">${temp}¬∞</div>
                        <div class="hour-rain">üíß ${rain}%</div>
                        <div class="hour-wind">üí® ${wind} km/h</div>
                    </div>
                `;
                
                hourlyContainer.appendChild(hourElement);
            }
        }

        // Update voorspelling
        function updateForecast(daily, units) {
            const forecastContainer = document.getElementById('forecastDays');
            forecastContainer.innerHTML = '';
            
            // Skip vandaag (index 0), toon de volgende 5 dagen
            for (let i = 1; i <= 5; i++) {
                const date = new Date(daily.time[i]);
                const dayName = getDayName(date);
                const weatherInfo = getWeatherInfo(daily.weather_code[i]);
                
                const dayElement = document.createElement('div');
                dayElement.className = 'forecast-day';
                dayElement.style.animationDelay = `${i * 0.1}s`;
                
                dayElement.innerHTML = `
                    <div class="day-info">
                        <div class="day-name">${dayName}</div>
                        <div class="day-icon">${weatherInfo.icon}</div>
                        <div class="day-condition">${weatherInfo.description}</div>
                    </div>
                    <div class="day-temps">
                        <div class="temp-high">${Math.round(daily.temperature_2m_max[i])}¬∞</div>
                        <div class="temp-low">${Math.round(daily.temperature_2m_min[i])}¬∞</div>
                    </div>
                `;
                
                forecastContainer.appendChild(dayElement);
            }
        }

        // Krijg dagnaam
        function getDayName(date) {
            const days = ['Zondag', 'Maandag', 'Dinsdag', 'Woensdag', 'Donderdag', 'Vrijdag', 'Zaterdag'];
            return days[date.getDay()];
        }

        // Vertaal WMO weather code naar beschrijving en icoon
        function getWeatherInfo(code) {
            const weatherCodes = {
                0: { description: 'Helder', icon: '‚òÄÔ∏è' },
                1: { description: 'Overwegend helder', icon: 'üå§Ô∏è' },
                2: { description: 'Gedeeltelijk bewolkt', icon: '‚õÖ' },
                3: { description: 'Bewolkt', icon: '‚òÅÔ∏è' },
                45: { description: 'Mist', icon: 'üå´Ô∏è' },
                48: { description: 'Mist met rijp', icon: 'üå´Ô∏è' },
                51: { description: 'Lichte motregen', icon: 'üå¶Ô∏è' },
                53: { description: 'Matige motregen', icon: 'üå¶Ô∏è' },
                55: { description: 'Dichte motregen', icon: 'üåßÔ∏è' },
                61: { description: 'Lichte regen', icon: 'üåßÔ∏è' },
                63: { description: 'Matige regen', icon: 'üåßÔ∏è' },
                65: { description: 'Zware regen', icon: '‚õàÔ∏è' },
                71: { description: 'Lichte sneeuw', icon: 'üå®Ô∏è' },
                73: { description: 'Matige sneeuw', icon: '‚ùÑÔ∏è' },
                75: { description: 'Zware sneeuw', icon: '‚ùÑÔ∏è' },
                77: { description: 'Sneeuwbuien', icon: 'üå®Ô∏è' },
                80: { description: 'Lichte buien', icon: 'üå¶Ô∏è' },
                81: { description: 'Matige buien', icon: 'üåßÔ∏è' },
                82: { description: 'Zware buien', icon: '‚õàÔ∏è' },
                85: { description: 'Lichte sneeuwbuien', icon: 'üå®Ô∏è' },
                86: { description: 'Zware sneeuwbuien', icon: '‚ùÑÔ∏è' },
                95: { description: 'Onweer', icon: '‚õàÔ∏è' },
                96: { description: 'Onweer met hagel', icon: '‚õàÔ∏è' },
                99: { description: 'Onweer met zware hagel', icon: '‚õàÔ∏è' }
            };
            
            return weatherCodes[code] || { description: 'Onbekend', icon: 'üå°Ô∏è' };
        }

        // Update "laatst bijgewerkt" tijd
        function updateLastUpdated() {
            const now = new Date();
            const timeString = now.toLocaleTimeString('nl-NL', { 
                hour: '2-digit', 
                minute: '2-digit' 
            });
            document.getElementById('lastUpdated').textContent = `Laatst bijgewerkt: ${timeString}`;
        }

        // Initialiseer alles bij laden
        window.onload = function() {
            loadWeatherData();
            
            // Ververs weerdata elke 10 minuten
            setInterval(loadWeatherData, 10 * 60 * 1000);
        };
    </script>
</body>
</html>
